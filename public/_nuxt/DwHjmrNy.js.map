{"version":3,"file":"DwHjmrNy.js","sources":["../../../../pages/auth/forgot.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"relative mx-5 py-5 px-4 border border-gray-400 dark:border-gray-700\"\r\n  >\r\n    <AlertMessageBox\r\n      v-if=\"resetError\"\r\n      theme=\"danger\"\r\n      :message=\"resetError.message\"\r\n      :show-close=\"false\"\r\n    />\r\n\r\n    <div v-if=\"!formSent\" class=\"w-full\">\r\n      <h1 class=\"text-xl text-gray-50 font-bold\">Forgot Password</h1>\r\n      <form @submit.prevent=\"onSubmit\">\r\n        <div class=\"relative space-y-1 mt-2\">\r\n          <label for=\"email\" class=\"text-sm text-gray-50 font-semibold\"\r\n            >Email Address *</label\r\n          >\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            v-model=\"email\"\r\n            class=\"inline-flex w-full h-10 text-sm text-gray-900 dark:text-gray-50 px-3 border border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-700 hover:outline-none focus:ring-0 focus:outline-none hover:ring-0 rounded-sm\"\r\n          />\r\n          <div\r\n            v-if=\"emailError\"\r\n            class=\"text-xs text-red-500 italic mt-1 font-semibold\"\r\n          >\r\n            {{ emailError }}\r\n          </div>\r\n        </div>\r\n        <div class=\"grid grid-cols-2 gap-2\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"inline-flex w-full items-center justify-center py-2 bg-orange-600 hover:bg-orange-500 text-sm text-gray-50 font-semibold rounded-sm mt-5\"\r\n          >\r\n            Submit\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"inline-flex w-full items-center justify-center py-2 bg-gray-50 hover:bg-gray-900 text-sm text-gray-900 hover:text-gray-50 font-semibold rounded-sm mt-5\"\r\n            @click=\"goHome()\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div v-else class=\"w-full\">\r\n      <AlertMessageBox\r\n        theme=\"success\"\r\n        :show-close=\"false\"\r\n        message=\"Please check your email for reset instructions. Check your spam folder too.\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport * as Yup from \"yup\";\r\n\r\ndefinePageMeta({\r\n  layout: \"auth\",\r\n  middleware: \"auth\",\r\n});\r\nuseHead({\r\n  title: \"Forgot Password\",\r\n});\r\n\r\nconst { resetPassword } = useCheckout();\r\n\r\nconst formSent = ref(false);\r\nconst resetError = ref(<Error | null>null);\r\n\r\nconst scheme = Yup.object().shape({\r\n  email: Yup.string().email().required(\"Email Required\"),\r\n});\r\nconst { handleSubmit } = useForm({\r\n  validationSchema: scheme,\r\n});\r\nconst { value: email, errorMessage: emailError } = useField<string>(\"email\");\r\n\r\nconst onSubmit = handleSubmit(async (value) => {\r\n  const { email } = value;\r\n  await resetMyPassword(email);\r\n});\r\n\r\nasync function resetMyPassword(email: string) {\r\n  // validation\r\n  if (!email) {\r\n    resetError.value = {} as Error;\r\n    resetError.value.message = \"Missing email address\";\r\n    return;\r\n  }\r\n\r\n  // For security purposes, this always returns successful\r\n  // Check your server console logs for any errors\r\n  const result = await resetPassword(email);\r\n  console.log(\"reset form: \", result);\r\n  formSent.value = true;\r\n}\r\n\r\nfunction goHome() {\r\n  navigateTo(\"/\");\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":["useHead","resetPassword","useCheckout","formSent","ref","resetError","scheme","Yup.object","Yup.string","handleSubmit","useForm","email","emailError","useField","onSubmit","value","resetMyPassword","result","goHome","navigateTo"],"mappings":"omBAiEQA,EAAA,CACN,MAAO,iBAAA,CACR,EAEK,KAAA,CAAE,cAAAC,GAAkBC,IAEpBC,EAAWC,EAAI,EAAK,EACpBC,EAAaD,EAAkB,IAAI,EAEnCE,EAASC,EAAW,EAAE,MAAM,CAChC,MAAOC,IAAa,MAAM,EAAE,SAAS,gBAAgB,CAAA,CACtD,EACK,CAAE,aAAAC,CAAa,EAAIC,EAAQ,CAC/B,iBAAkBJ,CAAA,CACnB,EACK,CAAE,MAAOK,EAAO,aAAcC,GAAeC,EAAiB,OAAO,EAErEC,EAAWL,EAAa,MAAOM,GAAU,CACvC,KAAA,CAAE,MAAAJ,CAAU,EAAAI,EAClB,MAAMC,EAAgBL,CAAK,CAAA,CAC5B,EAED,eAAeK,EAAgBL,EAAe,CAE5C,GAAI,CAACA,EAAO,CACVN,EAAW,MAAQ,GACnBA,EAAW,MAAM,QAAU,wBAC3B,MACF,CAIM,MAAAY,EAAS,MAAMhB,EAAcU,CAAK,EAChC,QAAA,IAAI,eAAgBM,CAAM,EAClCd,EAAS,MAAQ,EACnB,CAEA,SAASe,GAAS,CAChBC,EAAW,GAAG,CAChB"}